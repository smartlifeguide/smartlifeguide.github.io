{{ define "main" }}
<section class="hero">
  <h1>{{ .Site.Title }}</h1>
  <p>{{ .Site.Params.description }}</p>
</section>

<!-- Category navigation -->
{{ $categories := .Site.Taxonomies.categories }}
{{ if $categories }}
<section class="category-nav">
  <h2>{{ if eq .Lang "ja" }}カテゴリから探す{{ else }}Browse by Category{{ end }}</h2>
  <div class="category-list">
    {{ range $name, $pages := $categories }}
    <a href="{{ "/categories/" | relLangURL }}{{ $name | urlize }}/" class="category-chip">
      {{ $name }} <span class="category-count">{{ len $pages }}</span>
    </a>
    {{ end }}
  </div>
</section>
{{ end }}

{{ partial "adsense.html" . }}

<section class="recent-articles">
  <h2>{{ if eq .Lang "ja" }}最新記事{{ else }}Latest Articles{{ end }}</h2>
  <div class="article-list">
    {{ $paginator := .Paginate .Site.RegularPages 10 }}
    {{ range $paginator.Pages }}
    <article class="article-summary">
      <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
      <time datetime="{{ .Date.Format "2006-01-02" }}">{{ if eq .Lang "ja" }}{{ .Date.Format "2006年1月2日" }}{{ else }}{{ .Date.Format "January 2, 2006" }}{{ end }}</time>
      <p>{{ .Description | default (.Summary | truncate 200) }}</p>
    </article>
    {{ end }}
  </div>

  <!-- Pagination -->
  {{ if gt $paginator.TotalPages 1 }}
  <nav class="pagination">
    {{ if $paginator.HasPrev }}
    <a href="{{ $paginator.Prev.URL }}" class="pagination-link">&larr; {{ if eq .Lang "ja" }}前のページ{{ else }}Previous{{ end }}</a>
    {{ end }}
    <span class="pagination-info">
      {{ if eq .Lang "ja" }}{{ $paginator.PageNumber }} / {{ $paginator.TotalPages }} ページ{{ else }}Page {{ $paginator.PageNumber }} of {{ $paginator.TotalPages }}{{ end }}
    </span>
    {{ if $paginator.HasNext }}
    <a href="{{ $paginator.Next.URL }}" class="pagination-link">{{ if eq .Lang "ja" }}次のページ{{ else }}Next{{ end }} &rarr;</a>
    {{ end }}
  </nav>
  {{ end }}
</section>
{{ end }}
